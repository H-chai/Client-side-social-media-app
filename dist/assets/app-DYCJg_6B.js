(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();const _="c8603e77-83d7-41ba-a742-4494007b8666",Z="https://v2.api.noroff.dev";function E(p){const e=new Headers;return e.append("X-Noroff-API-Key",_),localStorage.token&&e.append("Authorization",`Bearer ${localStorage.token}`),p&&e.append("Content-Type","application/json"),e}class l{static get user(){try{return JSON.parse(localStorage.getItem("user")).name}catch{return null}}static set user(e){localStorage.setItem("user",JSON.stringify(e))}static set token(e){localStorage.setItem("token",e)}static apiBase=Z;static paths={login:`${l.apiBase}/auth/login`,register:`${l.apiBase}/auth/register`,socialPost:`${l.apiBase}/social/posts`,socialProfiles:`${l.apiBase}/social/profiles`};auth={login:async({email:e,password:t})=>{const a=JSON.stringify({email:e,password:t}),n=await fetch(l.paths.login,{headers:E(!0),method:"POST",body:a}),{data:s}=await l.util.handleResponse(n,"Could not login this account"),{accessToken:o,...r}=s;return l.token=o,l.user=r,window.location.href="/Client-side-social-media-app/post/feed/?page=1",s},register:async({name:e,email:t,password:a})=>{const n=JSON.stringify({name:e,email:t,password:a}),s=await fetch(l.paths.register,{headers:E(!0),method:"POST",body:n});return await l.util.handleResponse(s,"Could not register this account")}};static util={handleResponse:async(e,t,a="json")=>{if(e.ok)return e.status===204?null:await e[a]();const s=(await e[a]()).errors[0]?.message||"Unknown error";throw new Error(`${t}: ${s}`)}};post={create:async({title:e,body:t,tags:a,media:n})=>{const s=JSON.stringify({title:e,body:t,tags:a,media:n}),o=await fetch(l.paths.socialPost,{headers:E(!0),method:"POST",body:s}),r=await l.util.handleResponse(o,"Could not create post");return window.location.href="/Client-side-social-media-app/post/feed/?page=1",r},delete:async e=>{const t=await fetch(`${l.paths.socialPost}/${e}`,{headers:E(),method:"DELETE"}),a=await l.util.handleResponse(t,"Could not delete post.");return alert("The post was deleted!"),window.location.href=`/Client-side-social-media-app/profile/?name=${l.user}`,a},readPost:async(e,t=null)=>{const a=new URL(`${l.paths.socialPost}/${e}`);a.searchParams.append("_author",!0),a.searchParams.append("_comments",!0),t&&a.searchParams.append("_tag",t);const n=await fetch(a.toString(),{headers:E(),method:"GET"});return await l.util.handleResponse(n,"Could not get the post")},update:async(e,{title:t,body:a,tags:n,media:s})=>{const o=JSON.stringify({title:t,body:a,tags:n,media:s}),r=await fetch(`${l.paths.socialPost}/${e}`,{headers:E(!0),method:"PUT",body:o});await l.util.handleResponse(r,"Could not update post"),window.location.href=`/Client-side-social-media-app/post/?id=${e}`},comment:async(e,{body:t,replyToId:a})=>{const n={body:t};a!==void 0&&(n.replyToId=a);const s=JSON.stringify(n),o=await fetch(`${l.paths.socialPost}/${e}/comment`,{headers:E(!0),method:"POST",body:s});return await l.util.handleResponse(o,"Could not comment on the post")},deleteComment:async(e,t)=>{const a=await fetch(`${l.paths.socialPost}/${e}/comment/${t}`,{headers:E(),method:"DELETE"}),n=await l.util.handleResponse(a,"Could not delete comment.");return alert("The comment was deleted."),n}};posts={getPosts:async(e=12,t=1,a)=>{const n=new URL(l.paths.socialPost);n.searchParams.append("limit",e),n.searchParams.append("page",t),n.searchParams.append("_author",!0),n.searchParams.append("_comments",!0),a&&n.searchParams.append("_tag",a);const s=await fetch(n.toString(),{headers:E(),method:"GET"});return await l.util.handleResponse(s,"Could not get posts")},getAllPosts:async()=>{const e=await fetch(l.paths.socialPost,{headers:E(),method:"GET"});return await l.util.handleResponse(e,"Could not get all posts")}};profile={readUsersPosts:async(e,t=12,a=1)=>{const n=new URL(`${l.paths.socialProfiles}/${e}/posts`);n.searchParams.append("_author",!0),n.searchParams.append("_comments",!0),n.searchParams.append("limit",t),n.searchParams.append("page",a);const s=await fetch(n.toString(),{headers:E(),method:"GET"});return await l.util.handleResponse(s,"Could not get user's post.")},readProfile:async function(t){const a=await fetch(`${l.paths.socialProfiles}/${t}`,{headers:E(),method:"GET"});return await l.util.handleResponse(a,"Could not get profile.")},update:async(e,{bio:t,avatar:a,banner:n})=>{const s=JSON.stringify({bio:t,avatar:a,banner:n}),o=await fetch(`${l.paths.socialProfiles}/${e}`,{headers:E(!0),method:"PUT",body:s});await l.util.handleResponse(o,"Could not update profile."),window.location.href=`/Client-side-social-media-app/profile/?name=${e}`},follow:async e=>{const t=await fetch(`${l.paths.socialProfiles}/${e}/follow`,{headers:E(),method:"PUT"});return await l.util.handleResponse(t,"Could not follow the user.")},unfollow:async e=>{const t=await fetch(`${l.paths.socialProfiles}/${e}/unfollow`,{headers:E(),method:"PUT"});return await l.util.handleResponse(t,"Could not unfollow the user.")}}}const h=new l(Z);function G(){localStorage.token||(alert("You must be logged in to view this page"),window.location.href="/Client-side-social-media-app/auth/login/")}function A(p){const e=new Date(p),t={day:"2-digit",month:"2-digit",year:"numeric"};return e.toLocaleDateString("en-GB",t)}function V(p){const e=document.createElement("a");e.classList.add("post-container"),e.id=p.id,e.href=`/Client-side-social-media-app/post/?id=${p.id}`;const t=document.createElement("figure"),a=document.createElement("img");a.classList.add("thumbnail"),p.media?.url?(a.src=p.media.url,a.alt=p.media.alt,a.onerror=()=>{a.src="/Client-side-social-media-app/public/images/default-thumbnail.jpg",a.alt="Default Thumbnail"}):(a.src="/Client-side-social-media-app/public/images/default-thumbnail.jpg",a.alt="No Media Available"),t.appendChild(a);const n=document.createElement("div");n.classList.add("post-text-container");const s=document.createElement("div");s.classList.add("post-user-date");const o=document.createElement("div");o.classList.add("user");const r=document.createElement("i");r.classList.add("fa-regular","fa-user");const d=document.createElement("a");d.classList.add("post-author"),d.textContent=p.author.name,d.href=`/Client-side-social-media-app/profile/?name=${p.author.name}`,o.append(r,d);const m=document.createElement("div");m.classList.add("date");const i=document.createElement("i");i.classList.add("fa-regular","fa-calendar");const c=document.createElement("p");c.textContent=A(p.created),m.append(i,c),s.append(o,m);const u=document.createElement("div");u.classList.add("post-tag-comment");const C=document.createElement("ul");C.classList.add("tag-list"),p.tags?.filter(B=>B.trim().length>0).forEach(B=>{const x=document.createElement("li");x.classList.add("tag-item"),x.textContent=B,C.appendChild(x)});const f=document.createElement("div");f.classList.add("comment");const v=document.createElement("i");v.classList.add("fa-regular","fa-comments");const S=document.createElement("p");S.textContent=p.comments.length,f.append(v,S),u.append(C,f);const L=document.createElement("p");return L.classList.add("post-title"),L.textContent=p.title,n.append(s,u,L),e.append(t,n),e}function ee(p){const e=document.createElement("div");e.classList.add("single-post-container");const t=document.createElement("div");t.classList.add("content-upper");const a=document.createElement("h1");a.textContent=p.title;const n=document.createElement("img");n.classList.add("thumbnail"),p.media?.url?(n.src=p.media.url,n.alt=p.media.alt):(n.src="/Client-side-social-media-app/public/images/default-thumbnail.jpg",n.alt="No Media Available");const s=document.createElement("div");s.classList.add("post-user-date");const o=document.createElement("div");o.classList.add("user");const r=document.createElement("i");r.classList.add("fa-regular","fa-user");const d=document.createElement("a");d.textContent=p.author.name,d.href=`/Client-side-social-media-app/profile/?name=${p.author.name}`,o.append(r,d);const m=document.createElement("div");m.classList.add("date");const i=document.createElement("i");i.classList.add("fa-regular","fa-calendar");const c=document.createElement("p");c.textContent=A(p.created),m.append(i,c),s.append(o,m);const u=document.createElement("ul");u.classList.add("tag-list","single-post-tag-list"),p.tags?.filter(y=>y.trim().length>0).forEach(y=>{const w=document.createElement("li");w.classList.add("tag-item"),w.textContent=y,u.appendChild(w)});const g=document.createElement("div");g.classList.add("content");const f=document.createElement("p");f.textContent=p.body,g.appendChild(f);const v=document.createElement("div");v.classList.add("comment-section");const S=document.createElement("p");S.classList.add("section-title"),S.textContent=`Comment (${p.comments.length})`;const L=document.createElement("ul");L.classList.add("comment-list");const B=p.comments,x=B.filter(y=>y.replyToId===null);for(let y=0;y<x.length;y++){const w=document.createElement("li");w.classList.add("comment-item","original-comment-item");const b=x[y];w.id=b.id,w.dataset.username=b.author.name;const $=document.createElement("div");$.classList.add("comment-container");const k=document.createElement("div");k.classList.add("user-info");const q=document.createElement("img");q.src=b.author.avatar.url;const P=document.createElement("a");P.classList.add("comment-username"),P.href=`/Client-side-social-media-app/profile/?name=${b.author.name}`,P.textContent=b.author.name,k.append(q,P);const R=document.createElement("div");R.classList.add("comment-content");const D=document.createElement("p");D.classList.add("comment-text"),D.textContent=b.body;const I=document.createElement("button");I.classList.add("comment-delete-button");const M=document.createElement("i");M.classList.add("fa-solid","fa-trash-can"),I.appendChild(M),R.append(D,I);const U=document.createElement("button");U.classList.add("reply-button"),U.innerHTML='<i class="fa-solid fa-reply"></i>Reply',$.append(k,R,U);const O=document.createElement("ul");O.classList.add("reply-list","ul-padding-left"),w.append($,O),L.appendChild(w)}const H=B.filter(y=>y.replyToId!==null),N=p.comments;for(let y=0;y<H.length;y++){const w=document.createElement("li");w.classList.add("comment-item","reply-comment-item");const b=H[y];w.id=b.id,w.dataset.username=b.author.name;const $=document.createElement("div");$.classList.add("comment-container");const k=document.createElement("div");k.classList.add("user-info");const q=document.createElement("img");q.src=b.author.avatar.url;const P=document.createElement("a");P.classList.add("comment-username"),P.href=`/Client-side-social-media-app/profile/?name=${b.author.name}`,P.textContent=b.author.name,k.append(q,P);const R=document.createElement("div");R.classList.add("comment-content");const D=document.createElement("p");D.classList.add("comment-text"),D.textContent=b.body;const I=document.createElement("button");I.classList.add("comment-delete-button");const M=document.createElement("i");M.classList.add("fa-solid","fa-trash-can"),I.appendChild(M),R.append(D,I);const U=document.createElement("button");U.classList.add("reply-button"),U.innerHTML='<i class="fa-solid fa-reply"></i>Reply',$.append(k,R,U);const O=document.createElement("ul");if(O.classList.add("reply-list"),w.append($,O),N.find(W=>Number(W.id)===b.replyToId)){const W=Array.from(L.querySelectorAll("li.comment-item"));Array.from(L.querySelectorAll("ul.reply-list")).forEach((z,ne)=>{});const Q=W.find(z=>Number(z.id)===b.replyToId);Q?Q.querySelector(".reply-list").appendChild(w):console.error("Parent reply item not found")}}const F=document.createElement("form");F.classList.add("comment-form"),F.name="comment";const Y=document.createElement("p");Y.classList.add("my-username"),Y.textContent=l.user;const X=document.createElement("p");X.classList.add("reply-message");const K=document.createElement("label");K.setAttribute("for","comment");const J=document.createElement("textarea");J.placeholder="Write comment here",J.name="comment",J.id="comment",K.appendChild(J);const j=document.createElement("button");return j.classList.add("submit-type-button","comment-button"),j.type="submit",j.innerText="Add comment",F.append(Y,X,K,j),v.append(S,L,F),t.append(a,n,s,u,g),e.append(t,v),e}class T extends l{constructor(){super(),this.router(),this.replyToId=null}async router(e=window.location.pathname){switch(e.replace("/Client-side-social-media-app","")){case"/":await this.views.login();break;case"/auth/login/":await this.views.login();break;case"/auth/register/":await this.views.register();break;case"/post/":await this.views.post();break;case"/post/edit/":await this.views.postEdit();break;case"/post/create/":await this.views.postCreate();break;case"/post/feed/":await this.views.feed();break;case"/profile/":await this.views.profile();break;case"/profile/update/":await this.views.profileUpdate();break;default:await this.views.notFound()}}static form={handleSubmit(e){e.preventDefault();const t=e.target,a=new FormData(t);return Object.fromEntries(a.entries())}};setReplyToId(e){const t=e.target.closest(".comment-item");this.replyToId=Number(t.id),console.log(this.replyToId);const a=t.dataset.username;t.style.backgroundColor="#dedede";const n=document.querySelector(".reply-message");n.innerHTML=`<button class="cancel" type="button"><i class="fa-solid fa-circle-xmark"></i></button>Replying to <span class="reply-to">${a}</span>`,document.querySelector(".cancel").addEventListener("click",()=>{n.innerHTML="",this.replyToId=null,t.style.backgroundColor="transparent"})}setupReplyButtons(){document.querySelectorAll(".reply-button").forEach(t=>{t.addEventListener("click",a=>this.setReplyToId(a))})}views={register:async()=>{document.forms.register.addEventListener("submit",this.events.register)},login:async()=>{document.forms.login.addEventListener("submit",this.events.login)},feed:async()=>{this.events.logout(),this.events.myPage();const t=new URLSearchParams(window.location.search).get("page")||localStorage.getItem("page")||1;this.events.post.displayPosts(Number(t))},postCreate:async()=>{G(),this.events.logout(),this.events.myPage(),document.forms.createPost.addEventListener("submit",this.events.post.create)},postEdit:async()=>{G(),this.events.logout(),this.events.myPage(),this.events.post.update(),this.events.post.delete()},post:async()=>{this.events.logout(),this.events.myPage(),this.events.post.displaySinglePost()},profile:async()=>{G(),this.events.logout(),this.events.myPage(),this.animation.headerPadding();const t=new URLSearchParams(window.location.search).get("page")||1;this.events.profile.displayProfilePage(Number(t))},profileUpdate:async()=>{G(),this.events.logout(),this.events.profile.updateProfile()},notFound:async()=>{alert("Page cannot be found in /src/views")}};currentPage=1;events={login:async e=>{const t=T.form.handleSubmit(e);try{await h.auth.login(t)}catch(a){alert(a.message)}},register:async e=>{const t=T.form.handleSubmit(e),{name:a,email:n}=t;try{await h.auth.register(t),alert(`Registration successful!
Username: ${a}
Email: ${n}`),console.log(t),window.location.href="/Client-side-social-media-apps/auth/login/"}catch(s){alert(`${s.message}.
Please try again.`)}},logout:()=>{document.querySelector(".logout-button").addEventListener("click",t=>{t.preventDefault(),l.user=null,l.token=null,localStorage.page=null,alert("You have successfully logged out."),window.location.href="/"})},myPage:()=>{const e=document.querySelector(".my-page");e.href=`/Client-side-social-media-app/profile/?name=${l.user}`},post:{create:async e=>{const t=T.form.handleSubmit(e),a={url:t["media[url]"],alt:t["media[alt]"]},{title:n,body:s,tags:o}=t,r=o?o.split(",").map(d=>d.trim()).filter(d=>d.length>0):[];try{await h.post.create({title:n,body:s,tags:r,media:a})}catch(d){alert(d.message)}},delete:()=>{document.querySelector(".delete-button").addEventListener("click",async()=>{try{const a=new URLSearchParams(window.location.search).get("id");window.confirm("Are you sure you want to delete this post?")&&await h.post.delete(a)}catch(t){alert(t.message)}})},displayPosts:async(e=1)=>{try{const t=await h.posts.getPosts(12,e),{data:a,meta:n}=t,{currentPage:s,pageCount:o}=n,r=document.querySelector(".feed");r.innerHTML="",a.forEach(i=>{const c=V(i);r.appendChild(c)});const d=`${window.location.pathname}?page=${e}`;window.history.replaceState({},"",d),this.pagination.feedPagination(s,o),window.scrollTo({top:0,behavior:"smooth"}),document.querySelectorAll(".post-container").forEach(i=>{i.addEventListener("click",()=>{const u=new URLSearchParams(window.location.search).get("page");localStorage.setItem("page",u)})})}catch(t){alert(t.message)}},displaySinglePost:async()=>{try{const t=new URLSearchParams(window.location.search).get("id"),n=(await h.post.readPost(t)).data,s=n.author.name,o=document.createElement("button");o.classList.add("edit-button","button-dark"),o.textContent="Edit";const r=document.createElement("i");r.classList.add("fa-regular","fa-pen-to-square"),o.insertBefore(r,o.firstChild),o.dataset.id=t,s===l.user?o.style.display="block":o.style.display="none";const d=document.querySelector(".header-nav");d.insertBefore(o,d.firstChild),o.addEventListener("click",()=>{window.location.href=`/Client-side-social-media-app/post/edit/?id=${t}`});const m=document.querySelector(".single-post");m.innerHTML="";const i=ee(n);m.appendChild(i);const c=document.querySelector(".back-to-profile-page");c.href=`/profile/?name=${s}`,c.textContent=`${s}'s page`;const u=document.createElement("i");u.classList.add("fa-solid","fa-chevron-left","back-to-profile-icon"),c.insertBefore(u,c.firstChild),document.forms.comment.addEventListener("submit",this.events.post.comment);const g=document.querySelector(".back-link-on-single-page"),f=localStorage.getItem("page");g.href=`/Client-side-social-media-app/post/feed/?page=${f}`,this.events.post.deleteComment(),this.setupReplyButtons(),this.pagination.singlePostPagination()}catch(e){alert(e.message)}},update:async()=>{try{const t=new URLSearchParams(window.location.search).get("id"),a=await h.post.readPost(t),{data:n}=a,{title:s,body:o,tags:r,media:d}=n;document.getElementById("title").value=s,document.getElementById("content").value=o,document.getElementById("tags").value=r.join(","),document.getElementById("img-url").value=d.url,document.getElementById("img-alt").value=d.alt,document.forms.editPost.addEventListener("submit",async m=>{const i=T.form.handleSubmit(m);i.tags=i.tags.split(",").map(c=>c.trim()),i.media={url:i["media[url]"],alt:i["media[alt]"]},await h.post.update(t,i)})}catch(e){alert(e.message)}},comment:async e=>{const a=T.form.handleSubmit(e).comment;if(!a||a.trim()===""){alert("Comment cannot be empty.");return}const s=new URLSearchParams(window.location.search).get("id");if(this.replyToId)try{await h.post.comment(s,{body:a,replyToId:this.replyToId}),location.reload()}catch(o){alert(o.message)}else try{await h.post.comment(s,{body:a}),location.reload()}catch(o){alert(o.message)}},deleteComment:()=>{document.querySelectorAll(".comment-delete-button").forEach(t=>{t.addEventListener("click",async a=>{try{const s=new URLSearchParams(window.location.search).get("id"),o=a.target.closest(".comment-item"),r=o.id;window.confirm("Are you sure you want to delete this comment?")&&(await h.post.deleteComment(s,r),o.remove());const i=(await h.post.readPost(s)).data.comments.length,c=document.querySelector(".section-title");c.textContent=`Comment (${i})`}catch(n){alert(n.message)}})})}},profile:{displayProfilePage:async(e=1)=>{const a=new URLSearchParams(window.location.search).get("name");try{const n=await h.profile.readUsersPosts(a,12,e),s=await h.profile.readProfile(a),o=n.data,r=s.data,d=document.querySelector(".avatar");d.src=r.avatar.url;const m=document.querySelector(".username");m.textContent=r.name;const i=document.querySelector(".bio");i.textContent=r.bio,document.querySelector(".followers").textContent=r._count.followers,document.querySelector(".following").textContent=r._count.following,document.querySelector(".posts").textContent=r._count.posts;const c=document.querySelector(".profile-header"),u=r.banner.url;c.style.backgroundImage=`url(${u})`;const C=document.querySelector(".button-area"),g=document.createElement("button");g.classList.add("update-button"),g.textContent="Update Profile";const f=document.createElement("button");f.classList.add("follow-button"),f.id="toggle-button",f.textContent="Follow",C.append(g,f),a===l.user?(g.style.display="block",f.style.display="none"):(g.style.display="none",f.style.display="block"),g.addEventListener("click",()=>{window.location.href="/Client-side-social-media-app/profile/update/"});const v=document.querySelector(".feed");v.innerHTML="",o.forEach(x=>{const H=V(x);v.appendChild(H)});const S=r._count.posts,L=Math.ceil(S/12),B=`${window.location.pathname}?name=${a}&page=${e}`;window.history.replaceState({},"",B),this.currentPage=e,this.pagination.profilePagination(this.currentPage,L),window.scrollTo({top:0,behavior:"smooth"}),this.events.profile.follow()}catch(n){alert(n.message)}},updateProfile:async()=>{try{const e=l.user,t=await h.profile.readProfile(e),{data:a}=t,{bio:n,avatar:s,banner:o}=a;document.getElementById("bio").value=n||"",document.getElementById("banner").value=o.url||"",document.getElementById("banner-alt").value=o.alt||"",document.getElementById("avatar").value=s.url||"",document.getElementById("avatar-alt").value=s.alt||"",document.forms.updateProfile.addEventListener("submit",async m=>{m.preventDefault();const i=T.form.handleSubmit(m);i.banner={url:i["banner[url]"],alt:i["banner[alt]"]},i.avatar={url:i["avatar[url]"],alt:i["avatar[alt]"]},await h.profile.update(e,i)});const r=document.querySelector(".back-to-profile-page");r.href=`/Client-side-social-media-app/profile/?name=${l.user}`,r.textContent="My profile page";const d=document.createElement("i");d.classList.add("fa-solid","fa-chevron-left","back-to-profile-icon"),r.insertBefore(d,r.firstChild)}catch(e){alert(e.message)}},follow:()=>{const e=document.getElementById("toggle-button");e.addEventListener("click",async()=>{try{const a=new URLSearchParams(window.location.search).get("name");e.disabled=!0,e.textContent==="Follow"?(await h.profile.follow(a),e.textContent="Unfollow"):(await h.profile.unfollow(a),e.textContent="Follow");const o=(await h.profile.readProfile(a)).data._count.followers;document.querySelector(".followers").textContent=o}catch(t){alert(t.message)}e.disabled=!1})}}};pagination={feedPagination:async(e,t)=>{const a=document.querySelector(".feed-pagination");a.innerHTML="";const n=(i,c)=>{const u=document.createElement("button");return u.textContent=i,u.dataset.page=c,u.className="pagination-button",c===e&&u.classList.add("current-page"),u.addEventListener("click",()=>{this.events.post.displayPosts(c)}),u},s=()=>{const i=document.createElement("span");return i.textContent="...",i},o=document.createElement("button"),r=document.createElement("i");if(r.classList.add("fa-solid","fa-chevron-left"),o.appendChild(r),a.appendChild(o),o.addEventListener("click",()=>{e>1&&this.events.post.displayPosts(e-1)}),e===1?(o.disabled=!0,o.style.cursor="not-allowed"):o.disabled=!1,e<4){for(let c=1;c<4;c++){const u=n(c,c);a.appendChild(u)}a.appendChild(s());const i=n(t,t);a.appendChild(i)}if(e>=4&&e<=t-3){const i=n(1,1);a.appendChild(i),a.appendChild(s());const c=Math.max(3,e-2),u=Math.min(t-2,e+2);for(let g=c;g<=u;g++){const f=n(g,g);a.appendChild(f)}a.appendChild(s());const C=n(t,t);a.appendChild(C)}if(e>t-3){const i=n(1,1);a.appendChild(i),a.appendChild(s());for(let c=t-2;c<=t;c++){const u=n(c,c);a.appendChild(u)}}if(t<=7)for(let i=1;i<8;i++){const c=n(i,i);a.appendChild(c)}const d=document.createElement("button"),m=document.createElement("i");m.classList.add("fa-solid","fa-chevron-right"),d.appendChild(m),a.appendChild(d),d.addEventListener("click",()=>{e<t&&this.events.post.displayPosts(e+1)}),e===t?(d.disabled=!0,d.style.cursor="not-allowed"):d.disabled=!1},singlePostPagination:async()=>{let e=await h.posts.getAllPosts(),{data:t,meta:a}=e;const n=a.totalCount;let s=1;const o=new URLSearchParams(window.location.search),r=Number(o.get("id"));let d=t.findIndex(c=>c.id===r);for(;d===-1&&s*100<n;){s++;let c=await h.posts.getPosts(100,s);t=t.concat(c.data),d=t.findIndex(u=>u.id===r)}const m=document.getElementById("previous-post");if(m)if(d>0){const c=t[d-1].id;m.addEventListener("click",()=>{window.location.href=`/Client-side-social-media-app/post/?id=${c}`})}else m.disabled=!0,m.style.cursor="not-allowed";const i=document.getElementById("next-post");if(i)if(d<t.length-1){const c=t[d+1]?.id;i.addEventListener("click",()=>{c&&(window.location.href=`/Client-side-social-media-app/post/?id=${c}`)})}else if(s*100<n){s++;try{let c=await h.posts.getPosts(100,s);t=t.concat(c.data),d=t.findIndex(C=>C.id===r);const u=t[d+1]?.id;i.addEventListener("click",()=>{u?window.location.href=`/Client-side-social-media-app/post/?id=${u}`:(i.disabled=!0,i.style.cursor="not-allowed")})}catch(c){alert(c.message),i.disabled=!0,i.style.cursor="not-allowed"}}else i.disabled=!0,i.style.cursor="not-allowed"},profilePagination:async(e,t)=>{this.currentPage=e;const a=document.querySelector(".feed-pagination");a.innerHTML="";const n=(m,i)=>{const c=document.createElement("button");return c.textContent=m,c.dataset.page=i,c.className="pagination-button",i===this.currentPage&&c.classList.add("current-page"),c.addEventListener("click",()=>{this.currentPage=i,this.events.profile.displayProfilePage(i)}),c},s=document.createElement("button"),o=document.createElement("i");o.classList.add("fa-solid","fa-chevron-left"),s.appendChild(o),a.appendChild(s),s.addEventListener("click",()=>{this.currentPage>1&&this.events.profile.displayProfilePage(this.currentPage-1)}),this.currentPage===1?(s.disabled=!0,s.style.cursor="not-allowed"):s.disabled=!1;for(let m=1;m<=t;m++){const i=n(m,m);a.appendChild(i)}const r=document.createElement("button"),d=document.createElement("i");d.classList.add("fa-solid","fa-chevron-right"),r.appendChild(d),a.appendChild(r),r.addEventListener("click",()=>{this.currentPage<t&&this.events.profile.displayProfilePage(this.currentPage+1)}),this.currentPage===t?(r.disabled=!0,r.style.cursor="not-allowed"):r.disabled=!1}};animation={headerPadding:()=>{const e=document.querySelector(".profile-header"),t=18.4,a=4,n=window.matchMedia("(min-width: 1024px)");window.addEventListener("scroll",()=>{n.matches?window.scrollY>0?e.style.paddingBottom=`${a}rem`:e.style.paddingBottom=`${t}rem`:e.style.paddingBottom="12.8rem"})}}}new T;
